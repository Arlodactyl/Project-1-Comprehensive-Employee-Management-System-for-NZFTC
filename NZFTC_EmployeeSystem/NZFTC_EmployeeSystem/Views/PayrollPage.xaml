<Page x:Class="NZFTC_EmployeeSystem.Views.PayrollPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      Title="Payroll">
    <!--
      PayrollPage
      Shows payslips for the logged in employee and, if the user is an
      administrator, all employees' payslips. Uses a TabControl to
      separate the two views. Dates and currency values are formatted
      using the appropriate StringFormat settings.
    -->
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Text="Payroll" FontSize="24" FontWeight="Bold" Margin="0,0,0,20"/>
        <TabControl Grid.Row="1">
            <!-- Employee's own payslips -->
            <TabItem Header="My Payslips">
                <DataGrid x:Name="MyPayslipsGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          Margin="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Pay Period Start" Binding="{Binding PayPeriodStart, StringFormat=dd/MM/yyyy}" Width="*"/>
                        <DataGridTextColumn Header="Pay Period End" Binding="{Binding PayPeriodEnd, StringFormat=dd/MM/yyyy}" Width="*"/>
                        <DataGridTextColumn Header="Gross" Binding="{Binding GrossSalary, StringFormat=C}" Width="*"/>
                        <DataGridTextColumn Header="Tax" Binding="{Binding TaxDeduction, StringFormat=C}" Width="*"/>
                        <DataGridTextColumn Header="Net" Binding="{Binding NetSalary, StringFormat=C}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
            <!-- Admin view of all payslips -->
            <TabItem Header="All Payslips" x:Name="AdminPayslipsTab">
                <DataGrid x:Name="AllPayslipsGrid"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          Margin="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Employee" Binding="{Binding Employee.FullName}" Width="*"/>
                        <DataGridTextColumn Header="Pay Period Start" Binding="{Binding PayPeriodStart, StringFormat=dd/MM/yyyy}" Width="*"/>
                        <DataGridTextColumn Header="Pay Period End" Binding="{Binding PayPeriodEnd, StringFormat=dd/MM/yyyy}" Width="*"/>
                        <DataGridTextColumn Header="Gross" Binding="{Binding GrossSalary, StringFormat=C}" Width="*"/>
                        <DataGridTextColumn Header="Tax" Binding="{Binding TaxDeduction, StringFormat=C}" Width="*"/>
                        <DataGridTextColumn Header="Net" Binding="{Binding NetSalary, StringFormat=C}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>
    </Grid>
</Page>
